<%- layout('layouts/session.ejs') %>

<script type="text/javascript">
  	function setDep(id){
  		try{
  			if(estado){	
				var idCountry = id[id.selectedIndex].id;
				var depar = document.getElementById('Estate');
				var dep = <%- JSON.stringify(estado) %>;
				for (var i = 0; i < Object.keys(dep).length;i++){
					if(dep[i][2] == idCountry){
						var opt = document.createElement('option');
						opt.id = dep[i][1];
						opt.innerHTML = dep[i][0];
						depar.appendChild(opt);
					}
				}
			}
	  	}
	  	catch(err){

	  	}
	}

	function setCit(id) {
		try{
		var idEstate = id[id.selectedIndex].id;
		var city = document.getElementById('City');
		var cit = <%- JSON.stringify(ciudad) %>;
		}catch(err){

		}
		/***
		for (var i = 0; i < Object.keys(cit).length;i++){
			if(cit[i][2] == idEstate){
				var opt = document.createElement('option');
				opt.value = cit[i][1];
				opt.innerHTML = cit[i][0];
				city.appendChild(opt);
			}
		}***/
	}
  </script>

<section class="curso">
		<div class="container">
			<div class="row" style="text-align:center;">
				<div class="col-md-12">
					<h2>Completar</h2>
					<p class="descReg">Completar registro del docente <%= user.firstName%> <%= user.lastName%> </p>
				</div>
			</div>
		</div>
	</section>

	
	<section>
		<form class="container" action="/completarUsuario" method="POST" enctype="multipart/form-data">
			<div class="row container-fluid">
				<div class="col-md-12 text-center">
					<img src="img/Users/<%= user.photo%>" class="photoPro"> 
				</div>
			</div>
			<div class="row" style="margin: 0 35%">
				<div class="col-md-12">
					<div class="upload-btn-wrapper">
					  <button class="btn">Cargar foto de perfil</button>
					  <input type="file" name="avatar" accept=".jpg"/>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-sm-12">
					<div class="form-group r">
						<label>Fecha de Nacimiento</label>
          	<input type="date" class="form-control rgt" name="date" placeholder="Type here..." required>
        	</div>
				</div>
				<div class="col-md-6 col-sm-12">
					<div class="form-group l">
						<label>Cedula</label>
          	<input type="number" class="form-control rgt" name="document" placeholder="Type here...">
        	</div>	
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-sm-12">
					<div class="form-group r">
          				<label>Pais</label>
          				<select name="pais" class="form-control" id="Country" onchange="setDep(this)">
          					<% for(var i=0; i < Object.keys(pais).length; i++){ %>
          						<option id="<%= pais[i][1]%>" > <%= pais[i][0]%></option>
          					<% } %> 
			          	</select>
        			</div>
				</div>
				<div class="col-md-6 col-sm-12">
					<div class="form-group l">
          				<label>Departamento</label>
          				<select name="departamento" class="form-control" id="Estate" onchange="setCit(this)">
			          	</select>
        			</div>	
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-sm-12">
					<div class="form-group r">
          				<label>Ciudad</label>
          				<select name="ciudad" class="form-control" id="City">

			          	</select>
        			</div>
				</div>
				<div class="col-md-6 col-sm-12">
					<div class="form-group l">
			          	<label>Empresa</label>
			          	<input type="text" class="form-control rgt" name="empresa" minlength="8" placeholder="Type here..." required>
		        	</div>	
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 col-sm-12">
					<button type="submit" class="btn btn-default r">Completar</button>
				</div>
				<div class="col-md-6 col-sm-12">
					<button type="submit" class="btn btn-default l" formaction="/" formmethod="GET">Cancelar</button>
				</div>
			</div>

			<!--  Necesitamos mirar bien esta parte para que no se vaya a darÃ±ar el responsive-->
			<% if(signupMessage.length > 0) { %>
				<div class="row">
					<div class="col-md-6 col-sm-12">
						<div class="form-group r">
							<label><%= signupMessage %></label>
						</div>
					</div>
				</div>
			<% } %>
    	</form>
	</section>